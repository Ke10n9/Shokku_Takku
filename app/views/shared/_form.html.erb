<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      <h5 class="modal-title" id="exampleModalLabel">新しい献立を登録しましょう。</h5>
    </div>
    <div class="modal-body">
      <section class="menu_form">
        <%= form_with model: @menu, remote: true do |f| %>
          <div class="error-message alert-danger" id="error_explanation"></div>
          <div class="error-messagea alert-danger" id="error_explanation"></div>
          <%= f.date_field :date, value: @menu_date %>
          <%= f.select :time, @menu_times, prompt: "（朝昼夕）", selected: @menu_time %>
          <span class="picture col-xs-12">
            <%= f.label :picture, "画像をアップロード", class: "btn image_input_btn" %>
            <%= f.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
          </span>
          <div class="dishes-form">
          <% @dishes.each do |dish| %>
            <%= f.fields_for "dishes_attributes[]", dish do |i| %>
              <%= render 'shared/error_messages', object: i.object %>
              <span class="form">
                <%= i.select :category, @dish_categories,
                                { prompt: "（分類）", selected: dish.category },
                                                  class: "category dish-form" %>
                <%= i.text_field :name, placeholder: "品名", value: dish.name,
                                                      class: "name dish-form" %>
              </span>
            <% end %>
          <% end %>
          </div>
          <%= f.submit "送信", class: "btn btn-square-so-pop" %>
        <% end %>
      </section>
    </div>
  </div>
</div>

  <script type="text/javascript">
    $('#menu_picture').bind('change', function() {
      var size_in_megabytes = this.files[0].size/1024/1024;
      if (size_in_megabytes > 5) {
        alert('最大ファイルサイズは5MBです。');
      }
    });
  </script>
